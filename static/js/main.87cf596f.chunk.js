(this.webpackJsonppoetrylab=this.webpackJsonppoetrylab||[]).push([[0],{182:function(e,t,a){e.exports=a(334)},187:function(e,t,a){},334:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),o=a.n(i),l=(a(187),a(165)),s=a(16),c=a(17),m=a(54),u=a(19),p=a(18),d=a(48),h=a(42),b=a(88),f=a.n(b),E=a(4),g=a(377),y=a(374),j=a(375),v=a(383),O=a(376),k=a(379),C=a(89),w=a(378),x=a(373),P=a(157),N=a.n(P),S=a(160),T=a.n(S),A=a(158),B=a.n(A),z=a(159),L=a.n(z),D=a(380),I=a(381),U=a(382),q=a(161),R=a.n(q),G=a(162),F=a.n(G),H=a(388),W=a(156),$=a.n(W),_=a(155),J=a.n(_),Y=a(389),K=a(166),M=a(149),Q="http://postdata.uned.es:5000/",V="El Pr\xedncipe constante",X="\xc9stas que fueron pompa y alegr\xeda\ndespertando al albor de la ma\xf1a-\nna, a la tarde ser\xe1n l\xe1stima vana\ndurmiendo en brazos de la noche fr\xeda.\n\nEste matiz que al cielo desaf\xeda,\nIris listado de oro, nieve y grana,\nser\xe1 escarmiento de la vida humana:\n\xa1tanto se emprende en t\xe9rmino de un d\xeda!\n\nA florecer las rosas madrugaron,\ny para envejecerse florecieron:\ncuna y sepulcro en un bot\xf3n hallaron.\n\nTales los hombres sus fortunas vieron:\nen un d\xeda nacieron y espiraron;\nque pasados los siglos horas fueron.",Z=function(e){return 0===Object.entries(e).length&&e.constructor===Object},ee=function(e,t){var a=e.split(/[\n]+/),n={},r=0,i=t.entities[r];return a.forEach((function(e,a){var o={};Object(M.tokenize)({text:e}).forEach((function(e,a){t.entities&&r<t.entities.length&&e===i.term&&(o[a]=Object.fromEntries(Object.entries(i).map((function(e){var t=Object(K.a)(e,2);return[t[0],t[1].trim()]}))),i=t.entities[++r])})),Z(o)||(n[a]=o)})),Object(h.a)(Object(h.a)({},t),{},{entities:n})},te=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},ae=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.uri,n=e.geo,i=e.type,o=e.mode,l=e.gazetteer,s=e.children,c=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"".concat(te({CN:"common name",PN:"proper name",RNA:"royal name",PPN:"proposed proper name",STN:"saint name",PSTN:"proposed saint name",APN:"ambiguous proper name",ACN:"ambiguous common name",PLN:"place name",PPLN:"proposed place name",APLN:"ambiguous place name",UN:"unidentified"}[i])," (").concat({AT:"ambiguous",FT:"found",GENT:"generated",INI:"unidentified",PPT:"proposed"}[o],")")),l?r.a.createElement("em",null,"".concat(l," Gazetteer")):"");return r.a.createElement("div",{className:t.entity},r.a.createElement(H.a,{title:c,placement:"top"},r.a.createElement("div",null,a?r.a.createElement("a",{href:a,title:n},s):s)))}}]),a}(r.a.Component),ne=Object(E.a)((function(e){return{entity:{borderBottom:"1px dashed",display:"inline-block",padding:"0.25em"}}}))(ae),re=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.symbol,i=t.syllables,o=t.entity,l=r.a.createElement(x.a,{color:"inherit","aria-label":"Synalepha",className:a.synalepha},r.a.createElement(J.a,null));return e=i?i.map((function(e,t){return[r.a.createElement(Y.a,{key:"$".concat(e).concat(t),color:e.is_stressed?"primary":"default",label:e.syllable}),e.has_synalepha?l:""]})):r.a.createElement(Y.a,{variant:"outlined",label:n}),r.a.createElement("div",{className:a.token},[o?r.a.createElement(ne,Object.assign({},o,{children:e.flat()})):e,r.a.createElement("span",{style:{marginRight:"0.75em"}})])}}]),a}(r.a.Component),ie=Object(E.a)((function(e){return{token:{display:"inline-block"},stressed:{backgroundColor:"red"},synalepha:{padding:0}}}))(re),oe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.tokens,n=e.annotations,i=a.map((function(e,t){return e.symbol?r.a.createElement(ie,{key:"$".concat(e.symbol||e.word).concat(t),symbol:e.symbol}):r.a.createElement(ie,{syllables:e.word,entity:n.entities[t]})})),o=!Z(n.enjambment)?r.a.createElement(H.a,{title:te(n.enjambment.type),placement:"top"},r.a.createElement(x.a,{color:"inherit","aria-label":"Enjambment",className:t.enjambment},r.a.createElement($.a,null))):"";return r.a.createElement("div",{className:t.line},r.a.createElement("span",null,i),r.a.createElement("span",null,o))}}]),a}(r.a.Component),le=Object(E.a)((function(e){return{line:{display:"inline-block",width:"100%",margin:"0.25em"},enjambment:{padding:0}}}))(oe),se=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this.props.poem;return e=Z(t.analysis)?t.text.split(/[\n]+/).map((function(e,t){return r.a.createElement(C.a,{key:t,paragraph:!0},e)})):t.analysis.scansion.map((function(e,a){return r.a.createElement(le,{tokens:e.tokens,annotations:{enjambment:t.analysis.enjambment[a]||{},entities:t.analysis.entities[a]||{}}})})),r.a.createElement("div",null,e)}}]),a}(r.a.Component),ce=Object(E.a)((function(e){return{textarea:{width:"50em"}}}))(se),me=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleDrawerOpen=function(){n.setState({open:!0})},n.handleDrawerClose=function(){n.setState({open:!1})},n.state={open:!1,operations:["scansion","enjambment","entities"]},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props,a=t.current,n=t.poems[a],r=n?n.text:null,i=n?n.analysis:{};Z(i)&&r&&function(e,t,a){var n=t.map((function(e){return"operations=".concat(e)})).join("&");fetch(Q+"analysis?".concat(n),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:e}).then((function(e){return e.json()})).catch((function(e){return console.warn("Fetch failed for analysis"),{}})).then((function(t){Z(t)||a(ee(e,t))}))}(r,this.state.operations,(function(t){return e.props.updatePoem(Object(h.a)(Object(h.a)({},n),{},{analysis:t}))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.theme,i=t.current,o=t.poems,l=this.state.open,s=o[i],c=s?s.title:"",m=s?s.text:"",u=s?r.a.createElement(ce,{poem:s}):"To start, add a poem";return r.a.createElement("div",{className:a.root},r.a.createElement(y.a,null),r.a.createElement(j.a,{position:"fixed",className:f()(a.appBar,Object(d.a)({},a.appBarShift,l))},r.a.createElement(O.a,{disableGutters:!l},r.a.createElement(x.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:f()(a.menuButton,l&&a.hide)},r.a.createElement(N.a,null)),r.a.createElement(C.a,{variant:"h6",color:"inherit",noWrap:!0},"PoetryLab: ",c))),r.a.createElement(g.a,{className:a.drawer,variant:"persistent",anchor:"left",open:l,classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.drawerHeader},r.a.createElement(x.a,{onClick:this.handleDrawerClose},"ltr"===n.direction?r.a.createElement(B.a,null):r.a.createElement(L.a,null))),r.a.createElement(w.a,null),r.a.createElement(k.a,null,this.props.poems.map((function(t,a){var n=t.title;t._;return r.a.createElement(D.a,{button:!0,key:n,onClick:function(){return e.props.changeCurrent(a)}},r.a.createElement(I.a,null,r.a.createElement(T.a,null)),r.a.createElement(U.a,{primary:n}))}))),r.a.createElement(w.a,null),r.a.createElement(k.a,null,r.a.createElement(D.a,{button:!0,key:"Upload a zip"},r.a.createElement(I.a,null,r.a.createElement(R.a,null)),r.a.createElement(U.a,{primary:"Upload a zip"})),r.a.createElement(D.a,{button:!0,key:"Download all"},r.a.createElement(I.a,null,r.a.createElement(F.a,null)),r.a.createElement(U.a,{primary:"Download all"})))),r.a.createElement("main",{className:f()(a.content,Object(d.a)({},a.contentShift,l))},r.a.createElement("div",{className:a.drawerHeader}),u,s&&Z(s.analysis)&&m?[r.a.createElement(v.a,{key:"analyzing-progress"}),"Analyzing..."]:""))}}]),a}(r.a.Component),ue=Object(E.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(h.a)(Object(h.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}),{withTheme:!0})(me),pe=a(386),de=a(384),he=a(163),be=a.n(he),fe=a(385),Ee=a(164),ge=a.n(Ee),ye=a(335),je=a(387),ve=r.a.forwardRef((function(e,t){return r.a.createElement(ye.a,Object.assign({direction:"up"},e,{ref:t}))})),Oe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={open:!1,poemTitle:V,poemText:X},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.handleSubmit=function(){e.props.onSubmit(e.state.poemTitle,e.state.poemText),e.handleClose()},e.handleTextChange=function(t,a){e.setState(Object(d.a)({},[a],t.target.value))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(de.a,{color:"primary",variant:"extended","aria-label":"Add",className:t.fab,onClick:this.handleClickOpen},r.a.createElement(be.a,null),"Add Poem"),r.a.createElement(fe.a,{fullScreen:!0,open:this.state.open,onClose:this.handleClose,TransitionComponent:ve},r.a.createElement(j.a,{className:t.appBar},r.a.createElement(O.a,null,r.a.createElement(x.a,{color:"inherit",onClick:this.handleClose,"aria-label":"Close"},r.a.createElement(ge.a,null)),r.a.createElement(C.a,{variant:"h6",color:"inherit",className:t.flex},"Add Poem"),r.a.createElement(pe.a,{color:"inherit",onClick:this.handleSubmit},"Submit"))),r.a.createElement(k.a,null,r.a.createElement(D.a,{button:!0},r.a.createElement(je.a,{required:!0,label:"Title",margin:"normal",value:this.state.poemTitle,onChange:function(t){return e.handleTextChange(t,"poemTitle")}})),r.a.createElement(D.a,{button:!0},r.a.createElement(je.a,{required:!0,className:t.textarea,label:"Enter your poem text",multiline:!0,margin:"normal",variant:"filled",helperText:"You can use multiline",value:this.state.poemText,onChange:function(t){return e.handleTextChange(t,"poemText")}})))))}}]),a}(r.a.Component),ke=Object(E.a)((function(e){return{appBar:{position:"relative"},flex:{flex:1},fab:{margin:e.spacing(1),position:"absolute",float:"right",bottom:e.spacing(1),right:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)},textarea:{width:"50em"}}}))(Oe),Ce=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={poems:[],current:-1},n.addPoem=n.addPoem.bind(Object(m.a)(n)),n.changeCurrentPoem=n.changeCurrentPoem.bind(Object(m.a)(n)),n.updatePoem=n.updatePoem.bind(Object(m.a)(n)),n}return Object(c.a)(a,[{key:"addPoem",value:function(e,t){this.setState({poems:[].concat(Object(l.a)(this.state.poems),[{title:e,text:t,analysis:{}}]),current:this.state.poems.length})}},{key:"updatePoem",value:function(e){var t=this.state,a=t.poems;a[t.current]=e,this.setState({poems:a}),this.forceUpdate()}},{key:"changeCurrentPoem",value:function(e){this.setState({current:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ue,Object.assign({},this.state,{changeCurrent:this.changeCurrentPoem,updatePoem:this.updatePoem})),r.a.createElement(ke,{onSubmit:this.addPoem}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[182,1,2]]]);
//# sourceMappingURL=main.87cf596f.chunk.js.map